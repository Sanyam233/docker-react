2024/01/22 02:16:06.358687 [INFO] Starting...
2024/01/22 02:16:06.358740 [INFO] Starting EBPlatform-PlatformEngine
2024/01/22 02:16:06.358828 [INFO] reading event message file
2024/01/22 02:16:06.395482 [INFO] Engine received EB command userdata-exec

2024/01/22 02:16:06.404077 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1
2024/01/22 02:16:07.230112 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBBeanstalkMetadata --region us-east-1
2024/01/22 02:16:08.156402 [INFO] This is a workflow controlled instance.
2024/01/22 02:16:08.156532 [INFO] Engine command: (env-launch)

2024/01/22 02:16:08.158019 [INFO] Executing instruction: SyncClock
2024/01/22 02:16:08.158026 [INFO] Starting SyncClock
2024/01/22 02:16:08.158041 [INFO] Running command /bin/sh -c /usr/bin/chronyc tracking
2024/01/22 02:16:08.293145 [INFO] Reference ID    : A9FEA97B (169.254.169.123)
Stratum         : 4
Ref time (UTC)  : Mon Jan 22 02:16:00 2024
System time     : 0.235749260 seconds slow of NTP time
Last offset     : +0.000026475 seconds
RMS offset      : 0.000026475 seconds
Frequency       : 6.709 ppm slow
Residual freq   : +5.182 ppm
Skew            : 11.656 ppm
Root delay      : 0.000470511 seconds
Root dispersion : 0.000574933 seconds
Update interval : 0.4 seconds
Leap status     : Normal

2024/01/22 02:16:08.293179 [INFO] Running command /bin/sh -c /usr/bin/chronyc -a makestep
2024/01/22 02:16:08.524387 [INFO] 200 OK

2024/01/22 02:16:08.524463 [INFO] Skipping Configure OS
2024/01/22 02:16:08.524470 [INFO] Skipping LockRepo
2024/01/22 02:16:08.524476 [INFO] Skipping GenerateEBBanner
2024/01/22 02:16:08.524482 [INFO] Skipping Install Process Manager
2024/01/22 02:16:08.524487 [INFO] Skipping install syslog
2024/01/22 02:16:08.524493 [INFO] Skipping install cron
2024/01/22 02:16:08.524498 [INFO] Skipping install proxy
2024/01/22 02:16:08.524503 [INFO] Skipping installhealthd
2024/01/22 02:16:08.524509 [INFO] Skipping Install Log Streaming Manager
2024/01/22 02:16:08.524514 [INFO] Skipping install X-Ray
2024/01/22 02:16:08.524519 [INFO] Skipping install Third Party License
2024/01/22 02:16:08.524540 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:08.524544 [INFO] Executing instruction: installSqsd
2024/01/22 02:16:08.524549 [INFO] This is a web server environment instance, skip install sqsd daemon ...
2024/01/22 02:16:08.524554 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:08.524557 [INFO] Executing instruction: bootstraphealthd
2024/01/22 02:16:08.524561 [INFO] this is an enhanced health env ...
2024/01/22 02:16:08.524573 [INFO] bootstrap healthd....
2024/01/22 02:16:08.524587 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/22 02:16:11.203297 [INFO] /usr/bin/id: ‘healthd’: no such user

2024/01/22 02:16:11.205065 [INFO] none proxy, skip creating proxy dir for healthd
2024/01/22 02:16:11.205103 [INFO] bootstrap healthd....
2024/01/22 02:16:11.205126 [INFO] Running command /bin/sh -c /usr/bin/id -u healthd || /usr/sbin/useradd --user-group healthd -s /sbin/nologin --create-home
2024/01/22 02:16:11.209290 [INFO] 1001

2024/01/22 02:16:11.211420 [INFO] configure bundle log for healthd...
2024/01/22 02:16:11.211623 [INFO] Skipping Install yum packages
2024/01/22 02:16:11.211630 [INFO] Skipping install docker-compose
2024/01/22 02:16:11.211635 [INFO] Skipping MarkBaked
2024/01/22 02:16:11.211643 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:11.211646 [INFO] Executing instruction: TuneSystemSettings
2024/01/22 02:16:11.211649 [INFO] Starting TuneSystemSettings
2024/01/22 02:16:11.211654 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:11.213488 [INFO] Executing instruction: GetSetupLogRotate
2024/01/22 02:16:11.213492 [INFO] Initialize LogRotate files and directories
2024/01/22 02:16:11.229103 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:11.229115 [INFO] Executing instruction: BootstrapCFNHup
2024/01/22 02:16:11.229119 [INFO] Bootstrap cfn-hup
2024/01/22 02:16:11.230660 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb-command-handler.conf to /etc/cfn/hooks.d/aws-eb-command-handler.conf
2024/01/22 02:16:11.234410 [INFO] Executing instruction: StartCFNHup
2024/01/22 02:16:11.234420 [INFO] Start cfn-hup
2024/01/22 02:16:11.234473 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/22 02:16:11.258837 [INFO] cfn-hup is not registered with EB yet, registering it now
2024/01/22 02:16:11.258887 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/22 02:16:11.293459 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:16:11.835201 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:16:11.852766 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/22 02:16:11.865509 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/22 02:16:12.287844 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/22 02:16:12.297907 [INFO] Running command /bin/sh -c systemctl enable cfn-hup.service
2024/01/22 02:16:12.682982 [INFO] Synchronizing state of cfn-hup.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
Executing: /usr/lib/systemd/systemd-sysv-install enable cfn-hup
Created symlink /etc/systemd/system/multi-user.target.wants/cfn-hup.service → /etc/systemd/system/cfn-hup.service.

2024/01/22 02:16:12.683018 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/22 02:16:12.692479 [INFO] cfn-hup process is not running, starting it now
2024/01/22 02:16:12.692507 [INFO] Running command /bin/sh -c systemctl show -p PartOf cfn-hup.service
2024/01/22 02:16:12.704390 [INFO] Running command /bin/sh -c systemctl is-active cfn-hup.service
2024/01/22 02:16:12.713201 [INFO] Running command /bin/sh -c systemctl start cfn-hup.service
2024/01/22 02:16:12.786011 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:12.786034 [INFO] Executing instruction: SetupPublishLogCronjob
2024/01/22 02:16:12.786038 [INFO] Setup publish logs cron job...
2024/01/22 02:16:12.786042 [INFO] Copying file /opt/elasticbeanstalk/config/private/logtasks/cron/publishlogs to /etc/cron.d/publishlogs
2024/01/22 02:16:12.790584 [INFO] Executing instruction: Start Docker
2024/01/22 02:16:12.790597 [INFO] Starting Docker...
2024/01/22 02:16:12.790662 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-log.conf to /etc/systemd/system/docker.service.d/docker-log.conf
2024/01/22 02:16:12.903182 [INFO] Copying file /opt/elasticbeanstalk/config/private/docker-rsyslog.conf to /etc/rsyslog.d/docker-log.conf
2024/01/22 02:16:12.904947 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/22 02:16:13.508399 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/22 02:16:13.524897 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:16:13.825260 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:16:13.834721 [INFO] Running command /bin/sh -c systemctl show -p PartOf docker.service
2024/01/22 02:16:13.848547 [INFO] Running command /bin/sh -c systemctl is-active docker.service
2024/01/22 02:16:13.856454 [INFO] Running command /bin/sh -c systemctl start docker.service
2024/01/22 02:16:21.588441 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:21.588456 [INFO] Executing instruction: Setup Docker Options
2024/01/22 02:16:21.588458 [INFO] Setting up configurations for docker platform
2024/01/22 02:16:21.600233 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/22 02:16:21.622933 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:16:21.947576 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:16:21.958639 [INFO] Running command /bin/sh -c systemctl enable eb-docker-events.service
2024/01/22 02:16:22.265424 [INFO] Created symlink /etc/systemd/system/docker.service.wants/eb-docker-events.service → /etc/systemd/system/eb-docker-events.service.

2024/01/22 02:16:22.265453 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-events.service
2024/01/22 02:16:22.281061 [INFO] Running command /bin/sh -c systemctl is-active eb-docker-events.service
2024/01/22 02:16:22.288944 [INFO] Running command /bin/sh -c systemctl start eb-docker-events.service
2024/01/22 02:16:22.358586 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:22.358600 [INFO] Executing instruction: MarkBootstrapped
2024/01/22 02:16:22.358604 [INFO] Starting MarkBootstrapped
2024/01/22 02:16:22.358608 [INFO] Instance has NOT been bootstrapped
2024/01/22 02:16:22.358687 [INFO] Marked instance as Bootstrapped
2024/01/22 02:16:22.358691 [INFO] Executing instruction: Save CFN Stack Info
2024/01/22 02:16:22.358733 [INFO] Starting SwitchCFNStack
2024/01/22 02:16:22.358738 [INFO] Executing cleanup logic
2024/01/22 02:16:22.358747 [INFO] Platform Engine finished execution on command: env-launch

2024/01/22 02:16:48.662230 [INFO] Starting...
2024/01/22 02:16:48.662264 [INFO] Starting EBPlatform-PlatformEngine
2024/01/22 02:16:48.662283 [INFO] reading event message file
2024/01/22 02:16:48.662504 [INFO] Engine received EB command cfn-hup-exec

2024/01/22 02:16:48.745458 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1
2024/01/22 02:16:49.145493 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBBeanstalkMetadata --region us-east-1
2024/01/22 02:16:49.525110 [INFO] checking whether command app-deploy is applicable to this instance...
2024/01/22 02:16:49.525122 [INFO] this command is applicable to the instance, thus instance should execute command
2024/01/22 02:16:49.525125 [INFO] Engine command: (app-deploy)

2024/01/22 02:16:49.525129 [INFO] Downloading EB Application...
2024/01/22 02:16:49.525131 [INFO] Region: us-east-1
2024/01/22 02:16:49.525133 [INFO] envID: e-eicqmwcpj3
2024/01/22 02:16:49.525135 [INFO] envBucket: elasticbeanstalk-us-east-1-730335255488
2024/01/22 02:16:49.525138 [INFO] Using manifest file name from command request
2024/01/22 02:16:49.525142 [INFO] Unable to get version manifest file.
2024/01/22 02:16:49.525145 [INFO] Downloading latest manifest available.
2024/01/22 02:16:49.525147 [INFO] Download latest app version manifest
2024/01/22 02:16:49.525230 [INFO] resources/environments/e-eicqmwcpj3/_runtime/versions/manifest
2024/01/22 02:16:49.571946 [INFO] latestManifest key *: resources/environments/e-eicqmwcpj3/_runtime/versions/manifest_1705889693408

2024/01/22 02:16:49.572155 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-730335255488, object: /resources/environments/e-eicqmwcpj3/_runtime/versions/manifest_1705889693408
2024/01/22 02:16:49.583622 [INFO] Download successful49bytes downloaded
2024/01/22 02:16:49.583707 [INFO] Trying to read and parse version manifest...
2024/01/22 02:16:49.583732 [INFO] Downloading file with path: /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/22 02:16:49.583794 [INFO] URL: https://elasticbeanstalk-platform-assets-us-east-1.s3.amazonaws.com/stalks/eb_docker_amazon_linux_2023_1.0.340.0_20231216031808/sampleapp/EBSampleApp-Docker.zip
2024/01/22 02:16:49.637946 [INFO] Finished download file from https://elasticbeanstalk-platform-assets-us-east-1.s3.amazonaws.com/stalks/eb_docker_amazon_linux_2023_1.0.340.0_20231216031808/sampleapp/EBSampleApp-Docker.zip
2024/01/22 02:16:49.638306 [INFO] Executing instruction: ElectLeader
2024/01/22 02:16:49.638312 [INFO] Running leader election for instance i-0d7153ef103a4ee9e...
2024/01/22 02:16:49.638315 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/01/22 02:16:49.638330 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 07acae2b-7b3c-47d3-9fb3-e5d5c4dd3709 --listener-id i-0d7153ef103a4ee9e --region us-east-1
2024/01/22 02:16:49.993795 [INFO] Instance is Leader.
2024/01/22 02:16:49.993834 [INFO] Executing instruction: stopSqsd
2024/01/22 02:16:49.993838 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/22 02:16:49.993841 [INFO] Executing instruction: PreBuildEbExtension
2024/01/22 02:16:49.993844 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/22 02:16:49.993859 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/01/22 02:16:50.446689 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/22 02:16:50.446724 [INFO] Executing instruction: StagedockerApplication
2024/01/22 02:16:50.446738 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/22 02:16:50.468717 [INFO] Pruning containers ...
2024/01/22 02:16:50.468755 [INFO] Running command /bin/sh -c docker ps -a
2024/01/22 02:16:50.486046 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/22 02:16:50.486078 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/22 02:16:50.504102 [INFO] Total reclaimed space: 0B

2024/01/22 02:16:50.504139 [INFO] Running command /bin/sh -c docker ps -a
2024/01/22 02:16:50.520973 [INFO] CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

2024/01/22 02:16:50.521262 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/22 02:16:50.526458 [INFO] application/zip

2024/01/22 02:16:50.526469 [INFO] app source bundle is zip file ...
2024/01/22 02:16:50.526472 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/01/22 02:16:50.526483 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/01/22 02:16:50.529258 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/01/22 02:16:50.529267 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/22 02:16:50.529319 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/22 02:16:50.529336 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/22 02:16:50.529339 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/22 02:16:50.529343 [INFO] Executing instruction: Generate environment file
2024/01/22 02:16:50.529386 [INFO] Executing instruction: Docker Specific Build Application
2024/01/22 02:16:50.529389 [INFO] start build docker app
2024/01/22 02:16:50.529501 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/22 02:16:50.529538 [INFO] found images [public.ecr.aws/docker/library/python:3.8] in Dockerfile /var/app/staging/Dockerfile
2024/01/22 02:16:50.529543 [INFO] pull docker image if update is not false in Dockerrun.aws.json
2024/01/22 02:16:50.529545 [INFO] start to build docker image
2024/01/22 02:16:50.529556 [INFO] Running command /bin/sh -c docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/22 02:17:13.042892 [INFO] #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 267B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for public.ecr.aws/docker/library/python:3.8
#3 DONE 0.4s

#4 [internal] load build context
#4 transferring context: 5.30kB done
#4 DONE 0.0s

#5 [1/2] FROM public.ecr.aws/docker/library/python:3.8@sha256:22b8bf2be7a50eeb14b01322e580485681017032a720604baab1643a90a6b794
#5 resolve public.ecr.aws/docker/library/python:3.8@sha256:22b8bf2be7a50eeb14b01322e580485681017032a720604baab1643a90a6b794 0.0s done
#5 sha256:22b8bf2be7a50eeb14b01322e580485681017032a720604baab1643a90a6b794 1.86kB / 1.86kB done
#5 sha256:fb36df8267c3a647ab9a1af81d1696d3274c0c41c804af0d110b80b79fe4c270 2.01kB / 2.01kB done
#5 sha256:8a90415600108404fbe6f011c525e78dc2709d54c973738b1b960f69f361aef4 7.38kB / 7.38kB done
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 2.10MB / 49.56MB 0.2s
#5 sha256:1c74526957fc2157e8b0989072dc99b9582b398c12d1dcd40270fd76231bab0c 12.58MB / 24.05MB 0.2s
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 17.83MB / 64.14MB 0.2s
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 18.87MB / 49.56MB 0.3s
#5 sha256:1c74526957fc2157e8b0989072dc99b9582b398c12d1dcd40270fd76231bab0c 24.05MB / 24.05MB 0.3s
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 28.31MB / 64.14MB 0.3s
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 31.46MB / 49.56MB 0.4s
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 39.85MB / 64.14MB 0.4s
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 44.04MB / 49.56MB 0.6s
#5 sha256:1c74526957fc2157e8b0989072dc99b9582b398c12d1dcd40270fd76231bab0c 24.05MB / 24.05MB 0.5s done
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 53.48MB / 64.14MB 0.6s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 3.15MB / 211.10MB 0.6s
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 47.19MB / 49.56MB 0.7s
#5 sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 49.56MB / 49.56MB 0.8s done
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 61.87MB / 64.14MB 0.9s
#5 sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 0B / 6.39MB 0.9s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 16.78MB / 211.10MB 1.0s
#5 sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 3.15MB / 6.39MB 1.0s
#5 extracting sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4
#5 sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 64.14MB / 64.14MB 1.1s done
#5 sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 6.39MB / 6.39MB 1.1s
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 0B / 17.28MB 1.1s
#5 sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 6.39MB / 6.39MB 1.1s done
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 1.05MB / 17.28MB 1.2s
#5 sha256:f4cb18646a15052fbff9e6a7f2af27b73ce3033e9e973709fedf06058817f092 246B / 246B 1.2s done
#5 sha256:0a329b671abfc277cf19a2670d019384c564e146c9c5ed1bb97d173377497d6e 0B / 2.85MB 1.2s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 31.46MB / 211.10MB 1.4s
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 7.34MB / 17.28MB 1.4s
#5 sha256:0a329b671abfc277cf19a2670d019384c564e146c9c5ed1bb97d173377497d6e 2.85MB / 2.85MB 1.4s done
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 10.49MB / 17.28MB 1.5s
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 13.63MB / 17.28MB 1.6s
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 16.78MB / 17.28MB 1.7s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 46.14MB / 211.10MB 1.8s
#5 sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 17.28MB / 17.28MB 1.8s done
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 63.96MB / 211.10MB 2.1s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 77.59MB / 211.10MB 2.2s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 100.66MB / 211.10MB 2.4s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 123.73MB / 211.10MB 2.6s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 145.75MB / 211.10MB 2.8s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 158.33MB / 211.10MB 2.9s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 174.06MB / 211.10MB 3.0s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 187.70MB / 211.10MB 3.1s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 209.72MB / 211.10MB 3.3s
#5 sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 211.10MB / 211.10MB 3.5s done
#5 extracting sha256:1b13d4e1a46e5e969702ec92b7c787c1b6891bff7c21ad378ff6dbc9e751d5d4 3.5s done
#5 extracting sha256:1c74526957fc2157e8b0989072dc99b9582b398c12d1dcd40270fd76231bab0c
#5 extracting sha256:1c74526957fc2157e8b0989072dc99b9582b398c12d1dcd40270fd76231bab0c 0.8s done
#5 extracting sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 0.1s
#5 extracting sha256:30d85599795460b2d9d24c6b87c53ec60555b601705cc83bea31632240500980 3.6s done
#5 extracting sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2
#5 extracting sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 5.1s
#5 extracting sha256:ad5739181616b815fae7edc6bba689496674acbcf44e48a57fc7cc13a379b3a2 10.0s done
#5 extracting sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 0.1s
#5 extracting sha256:75e2b45cbee50cea4b3ed4f4fe167ad5994622d77a54adde89adcfeefa3c229a 0.4s done
#5 extracting sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72
#5 extracting sha256:76c111f84668456d1a37f894e2a1a6fc655cecf002d8b3f7934f4ffc14231f72 0.7s done
#5 extracting sha256:f4cb18646a15052fbff9e6a7f2af27b73ce3033e9e973709fedf06058817f092
#5 extracting sha256:f4cb18646a15052fbff9e6a7f2af27b73ce3033e9e973709fedf06058817f092 done
#5 extracting sha256:0a329b671abfc277cf19a2670d019384c564e146c9c5ed1bb97d173377497d6e
#5 extracting sha256:0a329b671abfc277cf19a2670d019384c564e146c9c5ed1bb97d173377497d6e 0.3s done
#5 DONE 21.1s

#6 [2/2] ADD application.py /tmp/application.py
#6 DONE 0.2s

#7 exporting to image
#7 exporting layers 0.0s done
#7 writing image sha256:30054814c8bf4ee81a6b72309aced981fc5646ada07f71e5105d692aefeffcec done
#7 naming to docker.io/aws_beanstalk/staging-app 0.0s done
#7 DONE 0.0s

2024/01/22 02:17:13.049227 [INFO] successfully execute command: docker build -t aws_beanstalk/staging-app /var/app/staging/
2024/01/22 02:17:13.049246 [INFO] successfully build docker image
2024/01/22 02:17:13.049249 [INFO] save staging docker image id
2024/01/22 02:17:13.050099 [INFO] Running command /bin/sh -c docker images aws_beanstalk/staging-app -q
2024/01/22 02:17:13.147743 [INFO] 30054814c8bf

2024/01/22 02:17:13.149696 [INFO] Executing instruction: configure X-Ray
2024/01/22 02:17:13.149704 [INFO] X-Ray is not enabled.
2024/01/22 02:17:13.149707 [INFO] Executing instruction: configure proxy Nginx
2024/01/22 02:17:13.161191 [INFO] Executing instruction: configure healthd specific proxy conf
2024/01/22 02:17:13.163476 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/22 02:17:13.195540 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:17:13.521333 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:17:13.529353 [INFO] Running command /bin/sh -c systemctl is-enabled aws-eb.target
2024/01/22 02:17:13.538369 [INFO] Running command /bin/sh -c systemctl enable aws-eb.target
2024/01/22 02:17:13.807092 [INFO] Running command /bin/sh -c systemctl start aws-eb.target
2024/01/22 02:17:13.823306 [INFO] Running command /bin/sh -c systemctl enable healthd.service
2024/01/22 02:17:14.100826 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/healthd.service → /etc/systemd/system/healthd.service.

2024/01/22 02:17:14.100865 [INFO] Running command /bin/sh -c systemctl show -p PartOf healthd.service
2024/01/22 02:17:14.112252 [INFO] Running command /bin/sh -c systemctl is-active healthd.service
2024/01/22 02:17:14.119630 [INFO] Running command /bin/sh -c systemctl start healthd.service
2024/01/22 02:17:14.171885 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_logformat.conf to /var/proxy/staging/nginx/conf.d/healthd_logformat.conf
2024/01/22 02:17:14.172765 [INFO] Copying file /opt/elasticbeanstalk/config/private/healthd/healthd_nginx.conf to /var/proxy/staging/nginx/conf.d/elasticbeanstalk/healthd.conf
2024/01/22 02:17:14.173479 [INFO] Executing instruction: configure log streaming
2024/01/22 02:17:14.173487 [INFO] log streaming is not enabled
2024/01/22 02:17:14.173491 [INFO] disable log stream
2024/01/22 02:17:14.173503 [INFO] Running command /bin/sh -c systemctl show -p PartOf amazon-cloudwatch-agent.service
2024/01/22 02:17:14.188194 [INFO] Running command /bin/sh -c systemctl stop amazon-cloudwatch-agent.service
2024/01/22 02:17:14.203772 [INFO] Executing instruction: GetToggleForceRotate
2024/01/22 02:17:14.203812 [INFO] Checking if logs need forced rotation
2024/01/22 02:17:14.203861 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1
2024/01/22 02:17:15.044030 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBBeanstalkMetadata --region us-east-1
2024/01/22 02:17:15.552713 [INFO] Procfile not found. Generating default rsyslog config
2024/01/22 02:17:15.555048 [INFO] Running command /bin/sh -c systemctl restart rsyslog.service
2024/01/22 02:17:15.962381 [INFO] Executing instruction: Configure Docker Logging
2024/01/22 02:17:15.982996 [INFO] Executing instruction: PostBuildEbExtension
2024/01/22 02:17:15.983010 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2024/01/22 02:17:15.983024 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPostBuild
2024/01/22 02:17:16.399546 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2024/01/22 02:17:16.399572 [INFO] Executing instruction: CleanEbExtensions
2024/01/22 02:17:16.399602 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2024/01/22 02:17:16.399606 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2024/01/22 02:17:16.399650 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2024/01/22 02:17:16.399668 [INFO] The dir .platform/hooks/predeploy/ does not exist
2024/01/22 02:17:16.399672 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2024/01/22 02:17:16.399678 [INFO] Executing instruction: stop X-Ray
2024/01/22 02:17:16.399682 [INFO] stop X-Ray ...
2024/01/22 02:17:16.399696 [INFO] Running command /bin/sh -c systemctl show -p PartOf xray.service
2024/01/22 02:17:16.415661 [WARN] stopProcess Warning: process xray is not registered 
2024/01/22 02:17:16.415756 [INFO] Running command /bin/sh -c systemctl stop xray.service
2024/01/22 02:17:16.434612 [INFO] Executing instruction: Run Docker Container
2024/01/22 02:17:16.434644 [INFO] this is the first time deploying app...
2024/01/22 02:17:16.434647 [INFO] Removing /var/app/current/ if it exists
2024/01/22 02:17:16.434654 [INFO] Renaming /var/app/staging/ to /var/app/current/
2024/01/22 02:17:16.434675 [INFO] detected new app is not docker compose app
2024/01/22 02:17:16.435504 [INFO] Running command /bin/sh -c docker run -d --env-file /opt/elasticbeanstalk/deployment/env.list -v /var/log/eb-docker/containers/eb-current-app:/tmp/sample-app  30054814c8bf 
2024/01/22 02:17:17.662191 [INFO] 2be1423137ef1597655252af832d3c3033e77a2f29d266407e5220aba63767fc

2024/01/22 02:17:22.666563 [INFO] Running command /bin/sh -c docker ps | grep -q 2be1423137ef
2024/01/22 02:17:22.698372 [INFO] Clear existing beanstalk iptables rules...
2024/01/22 02:17:22.698412 [INFO] Running command /bin/sh -c iptables-save | grep -v added_by_elasticbeanstalk | iptables-restore
2024/01/22 02:17:22.750881 [INFO] Getting container info...
2024/01/22 02:17:22.750909 [INFO] Running command /bin/sh -c docker inspect 2be1423137ef1597655252af832d3c3033e77a2f29d266407e5220aba63767fc

2024/01/22 02:17:22.774658 [INFO] Running command /bin/sh -c ip route show default | awk '{print $5}'
2024/01/22 02:17:22.799288 [INFO] ens5

2024/01/22 02:17:22.799320 [INFO] Writing nginx upstream config...
2024/01/22 02:17:22.804257 [INFO] Running command /bin/sh -c /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2024/01/22 02:17:22.867547 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2024/01/22 02:17:22.869931 [INFO] Running command /bin/sh -c cp -rp /var/proxy/staging/nginx/* /etc/nginx
2024/01/22 02:17:22.884232 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/22 02:17:22.910002 [INFO] register process nginx
2024/01/22 02:17:22.910039 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/22 02:17:22.930127 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:17:23.263784 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:17:23.271662 [INFO] Running command /bin/sh -c systemctl enable nginx.service
2024/01/22 02:17:23.529673 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/nginx.service → /usr/lib/systemd/system/nginx.service.

2024/01/22 02:17:23.529700 [INFO] Running command /bin/sh -c systemctl show -p PartOf nginx.service
2024/01/22 02:17:23.541591 [INFO] Running command /bin/sh -c systemctl restart nginx.service
2024/01/22 02:17:23.697295 [INFO] Running command /bin/sh -c service iptables save
2024/01/22 02:17:23.800890 [INFO] iptables: Saving firewall rules to /etc/sysconfig/iptables: [  OK  ]

2024/01/22 02:17:23.800908 [INFO] Traffic forward set-up completed.
2024/01/22 02:17:23.800911 [INFO] making STAGING app container current...
2024/01/22 02:17:23.800924 [INFO] Running command /bin/sh -c docker tag 30054814c8bf aws_beanstalk/current-app
2024/01/22 02:17:23.829536 [INFO] Running command /bin/sh -c docker rmi aws_beanstalk/staging-app
2024/01/22 02:17:23.853979 [INFO] Untagged: aws_beanstalk/staging-app:latest

2024/01/22 02:17:23.854793 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/22 02:17:23.875819 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:17:24.192739 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:17:24.201083 [INFO] Running command /bin/sh -c systemctl enable eb-docker.service
2024/01/22 02:17:24.509265 [INFO] The unit files have no installation config (WantedBy=, RequiredBy=, Also=,
Alias= settings in the [Install] section, and DefaultInstance= for template
units). This means they are not meant to be enabled using systemctl.
 
Possible reasons for having this kind of units are:
• A unit may be statically enabled by being symlinked from another unit's
  .wants/ or .requires/ directory.
• A unit's purpose may be to act as a helper for some other unit which has
  a requirement dependency on it.
• A unit may be started when needed via activation (socket, path, timer,
  D-Bus, udev, scripted systemctl call, ...).
• In case of template units, the unit is meant to be enabled with some
  instance name specified.

2024/01/22 02:17:24.509297 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker.service
2024/01/22 02:17:24.523392 [INFO] Running command /bin/sh -c systemctl is-active eb-docker.service
2024/01/22 02:17:24.531819 [INFO] Running command /bin/sh -c systemctl start eb-docker.service
2024/01/22 02:17:24.599045 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/22 02:17:24.615803 [INFO] Running command /bin/sh -c systemctl daemon-reload
2024/01/22 02:17:25.002705 [INFO] Running command /bin/sh -c systemctl reset-failed
2024/01/22 02:17:25.019730 [INFO] Running command /bin/sh -c systemctl enable eb-docker-log.service
2024/01/22 02:17:25.435110 [INFO] Created symlink /etc/systemd/system/eb-docker.service.wants/eb-docker-log.service → /etc/systemd/system/eb-docker-log.service.

2024/01/22 02:17:25.435160 [INFO] Running command /bin/sh -c systemctl show -p PartOf eb-docker-log.service
2024/01/22 02:17:25.457881 [INFO] Running command /bin/sh -c systemctl is-active eb-docker-log.service
2024/01/22 02:17:25.469287 [INFO] Running command /bin/sh -c systemctl start eb-docker-log.service
2024/01/22 02:17:25.672321 [INFO] docker container 2be1423137ef is running aws_beanstalk/current-app
2024/01/22 02:17:25.672341 [INFO] Cleanup images ...
2024/01/22 02:17:25.672355 [INFO] Running command /bin/sh -c docker images -a
2024/01/22 02:17:25.709005 [INFO] REPOSITORY                  TAG       IMAGE ID       CREATED          SIZE
aws_beanstalk/current-app   latest    30054814c8bf   13 seconds ago   998MB

2024/01/22 02:17:25.709038 [INFO] Running command /bin/sh -c docker rmi `docker images -aq`
2024/01/22 02:17:25.788821 [INFO] Error response from daemon: conflict: unable to delete 30054814c8bf (cannot be forced) - image is being used by running container 2be1423137ef

2024/01/22 02:17:25.788848 [INFO] Running command /bin/sh -c docker images -a
2024/01/22 02:17:25.812497 [INFO] REPOSITORY                  TAG       IMAGE ID       CREATED          SIZE
aws_beanstalk/current-app   latest    30054814c8bf   13 seconds ago   998MB

2024/01/22 02:17:25.812519 [INFO] Executing instruction: start X-Ray
2024/01/22 02:17:25.812524 [INFO] X-Ray is not enabled.
2024/01/22 02:17:25.812528 [INFO] Executing instruction: configureSqsd
2024/01/22 02:17:25.812532 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2024/01/22 02:17:25.812534 [INFO] Executing instruction: startSqsd
2024/01/22 02:17:25.812536 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2024/01/22 02:17:25.812539 [INFO] Executing instruction: Track pids in healthd
2024/01/22 02:17:25.812568 [INFO] This is an enhanced health env...
2024/01/22 02:17:25.812580 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2024/01/22 02:17:25.823626 [INFO] docker.service healthd.service eb-docker.service nginx.service cfn-hup.service eb-docker-log.service eb-docker-events.service

2024/01/22 02:17:25.823656 [INFO] Running command /bin/sh -c systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2024/01/22 02:17:25.832921 [INFO] 

2024/01/22 02:17:25.834516 [INFO] Executing instruction: Configure Docker Container Logging
2024/01/22 02:17:25.837973 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2024/01/22 02:17:25.838061 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2024/01/22 02:17:25.838078 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2024/01/22 02:17:25.838081 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2024/01/22 02:17:25.838087 [INFO] Executing cleanup logic
2024/01/22 02:17:25.838266 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1705889845838,"severity":"INFO"}]}]}

2024/01/22 02:17:25.838449 [INFO] Platform Engine finished execution on command: app-deploy

2024/01/22 02:44:44.499897 [INFO] Starting...
2024/01/22 02:44:44.499940 [INFO] Starting EBPlatform-PlatformEngine
2024/01/22 02:44:44.501479 [INFO] reading event message file
2024/01/22 02:44:44.502231 [INFO] Engine received EB command cfn-hup-exec

2024/01/22 02:44:44.706937 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1
2024/01/22 02:44:45.146906 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBBeanstalkMetadata --region us-east-1
2024/01/22 02:44:45.548234 [INFO] checking whether command app-deploy is applicable to this instance...
2024/01/22 02:44:45.548249 [INFO] this command is applicable to the instance, thus instance should execute command
2024/01/22 02:44:45.548253 [INFO] Engine command: (app-deploy)

2024/01/22 02:44:45.548256 [INFO] Downloading EB Application...
2024/01/22 02:44:45.548259 [INFO] Region: us-east-1
2024/01/22 02:44:45.548261 [INFO] envID: e-eicqmwcpj3
2024/01/22 02:44:45.548263 [INFO] envBucket: elasticbeanstalk-us-east-1-730335255488
2024/01/22 02:44:45.548266 [INFO] Using manifest file name from command request
2024/01/22 02:44:45.548271 [INFO] Manifest name is : manifest_1705891462432
2024/01/22 02:44:45.548274 [INFO] Download app version manifest
2024/01/22 02:44:45.553787 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-730335255488, object: /resources/environments/e-eicqmwcpj3/_runtime/versions/manifest_1705891462432
2024/01/22 02:44:45.596374 [INFO] Download successful126bytes downloaded
2024/01/22 02:44:45.596532 [INFO] Trying to read and parse version manifest...
2024/01/22 02:44:45.596595 [INFO] Downloading: bucket: elasticbeanstalk-us-east-1-730335255488, object: /resources/environments/e-eicqmwcpj3/_runtime/_versions/react-docker-demo/425ec2b37ce89e741acece76f65eea4d6b2dcb5e
2024/01/22 02:44:45.614038 [INFO] Download successful187664bytes downloaded
2024/01/22 02:44:45.615074 [INFO] Executing instruction: ElectLeader
2024/01/22 02:44:45.615080 [INFO] Running leader election for instance i-0d7153ef103a4ee9e...
2024/01/22 02:44:45.615083 [INFO] Calling the cfn-elect-cmd-leader to elect the command leader.
2024/01/22 02:44:45.615099 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-elect-cmd-leader --stack arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af --command-name ElasticBeanstalkCommand-AWSEBAutoScalingGroup --invocation-id 14306c5d-88e7-4ae7-bc7b-4e9a9f1bfad7 --listener-id i-0d7153ef103a4ee9e --region us-east-1
2024/01/22 02:44:45.944418 [INFO] Instance is Leader.
2024/01/22 02:44:45.944493 [INFO] Executing instruction: stopSqsd
2024/01/22 02:44:45.944498 [INFO] This is a web server environment instance, skip stop sqsd daemon ...
2024/01/22 02:44:45.944501 [INFO] Executing instruction: PreBuildEbExtension
2024/01/22 02:44:45.944504 [INFO] Starting executing the config set Infra-EmbeddedPreBuild.
2024/01/22 02:44:45.944519 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-init -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1 --configsets Infra-EmbeddedPreBuild
2024/01/22 02:44:46.367272 [INFO] Finished executing the config set Infra-EmbeddedPreBuild.

2024/01/22 02:44:46.367315 [INFO] Executing instruction: StagedockerApplication
2024/01/22 02:44:46.367328 [INFO] Running command /bin/sh -c docker ps -a -q -f status=running
2024/01/22 02:44:46.386581 [INFO] 2be1423137ef

2024/01/22 02:44:46.386603 [INFO] Pruning containers ...
2024/01/22 02:44:46.386616 [INFO] Running command /bin/sh -c docker ps -a
2024/01/22 02:44:46.405502 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS      NAMES
2be1423137ef   30054814c8bf   "python /tmp/applica…"   27 minutes ago   Up 27 minutes   8000/tcp   cranky_lovelace

2024/01/22 02:44:46.405531 [INFO] Running command /bin/sh -c docker container prune -f
2024/01/22 02:44:46.423768 [INFO] Total reclaimed space: 0B

2024/01/22 02:44:46.423792 [INFO] Running command /bin/sh -c docker ps -a
2024/01/22 02:44:46.442375 [INFO] CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS      NAMES
2be1423137ef   30054814c8bf   "python /tmp/applica…"   27 minutes ago   Up 27 minutes   8000/tcp   cranky_lovelace

2024/01/22 02:44:46.442395 [INFO] Cleanup images ...
2024/01/22 02:44:46.442407 [INFO] Running command /bin/sh -c docker images -a
2024/01/22 02:44:46.460796 [INFO] REPOSITORY                  TAG       IMAGE ID       CREATED          SIZE
aws_beanstalk/current-app   latest    30054814c8bf   27 minutes ago   998MB

2024/01/22 02:44:46.460824 [INFO] Running command /bin/sh -c docker rmi `docker images -aq`
2024/01/22 02:44:46.497698 [INFO] Error response from daemon: conflict: unable to delete 30054814c8bf (cannot be forced) - image is being used by running container 2be1423137ef

2024/01/22 02:44:46.497736 [INFO] Running command /bin/sh -c docker images -a
2024/01/22 02:44:46.515370 [INFO] REPOSITORY                  TAG       IMAGE ID       CREATED          SIZE
aws_beanstalk/current-app   latest    30054814c8bf   27 minutes ago   998MB

2024/01/22 02:44:46.515764 [INFO] Running command /bin/sh -c /bin/file -m /opt/elasticbeanstalk/config/private/beanstalk-magic -b --mime-type /opt/elasticbeanstalk/deployment/app_source_bundle
2024/01/22 02:44:46.524915 [INFO] application/zip

2024/01/22 02:44:46.524926 [INFO] app source bundle is zip file ...
2024/01/22 02:44:46.524930 [INFO] extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/
2024/01/22 02:44:46.524941 [INFO] Running command /bin/sh -c /usr/bin/unzip -q -o /opt/elasticbeanstalk/deployment/app_source_bundle -d /var/app/staging/
2024/01/22 02:44:46.538169 [INFO] finished extracting /opt/elasticbeanstalk/deployment/app_source_bundle to /var/app/staging/ successfully
2024/01/22 02:44:46.538185 [INFO] Executing instruction: RunAppDeployPreBuildHooks
2024/01/22 02:44:46.538211 [INFO] Executing platform hooks in .platform/hooks/prebuild/
2024/01/22 02:44:46.538229 [INFO] The dir .platform/hooks/prebuild/ does not exist
2024/01/22 02:44:46.538231 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/prebuild
2024/01/22 02:44:46.538236 [INFO] Executing instruction: Generate environment file
2024/01/22 02:44:46.538294 [INFO] Executing instruction: Docker Specific Build Application
2024/01/22 02:44:46.538298 [INFO] start build docker app
2024/01/22 02:44:46.538300 [INFO] detected new app as docker compose app
2024/01/22 02:44:46.538313 [INFO] Running command /bin/sh -c docker compose config
2024/01/22 02:44:47.026260 [INFO] Running command /bin/sh -c docker compose config --services
2024/01/22 02:44:47.106573 [INFO] web

2024/01/22 02:44:47.106748 [INFO] fetching image names from Dockerfile /var/app/staging/Dockerfile
2024/01/22 02:44:47.106810 [INFO] found images [node:16-alpine nginx:1.22.1-alpine] in Dockerfile /var/app/staging/Dockerfile
2024/01/22 02:44:47.106831 [INFO] Running command /bin/sh -c docker compose pull --ignore-buildable
2024/01/22 02:44:47.199472 [INFO]  web Skipped - No image to be pulled 

2024/01/22 02:44:47.199499 [INFO] successfully execute command: docker compose pull --ignore-buildable
2024/01/22 02:44:47.199514 [INFO] Running command /bin/sh -c docker compose build
2024/01/22 02:44:47.574070 [INFO] #0 building with "default" instance using docker driver

#1 [web internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [web internal] load build definition from Dockerfile
#2 transferring dockerfile: 365B done
#2 DONE 0.0s

#3 [web internal] load metadata for docker.io/library/build-stage:latest
#3 ERROR: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed

#4 [web internal] load metadata for docker.io/library/nginx:1.22.1-alpine
#4 CANCELED
------
 > [web internal] load metadata for docker.io/library/build-stage:latest:
------

2024/01/22 02:44:47.574542 [INFO] failed to solve: build-stage: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed

2024/01/22 02:44:47.574551 [WARN] failed to execute command: docker compose build, retrying...
2024/01/22 02:44:47.574564 [INFO] Running command /bin/sh -c docker compose build
2024/01/22 02:44:47.904667 [INFO] #0 building with "default" instance using docker driver

#1 [web internal] load .dockerignore
#1 transferring context: 2B done
#1 DONE 0.0s

#2 [web internal] load build definition from Dockerfile
#2 transferring dockerfile: 365B done
#2 DONE 0.0s

#3 [web internal] load metadata for docker.io/library/build-stage:latest
#3 ERROR: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed

#4 [web internal] load metadata for docker.io/library/nginx:1.22.1-alpine
#4 CANCELED
------
 > [web internal] load metadata for docker.io/library/build-stage:latest:
------

2024/01/22 02:44:47.904711 [INFO] failed to solve: build-stage: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed

2024/01/22 02:44:47.904725 [ERROR] An error occurred during execution of command [app-deploy] - [Docker Specific Build Application]. Stop running the command. Error: failed to build docker images: Command /bin/sh -c docker compose build failed with error exit status 17. Stderr:failed to solve: build-stage: pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed
 

2024/01/22 02:44:47.904727 [INFO] Executing cleanup logic
2024/01/22 02:44:47.904818 [INFO] CommandService Response: {"status":"FAILURE","api_version":"1.0","results":[{"status":"FAILURE","msg":"Engine execution has encountered an error.","returncode":1,"events":[{"msg":"Instance deployment failed to build the Docker image. The deployment failed.","timestamp":1705891487904,"severity":"ERROR"},{"msg":"Instance deployment failed. For details, see 'eb-engine.log'.","timestamp":1705891487904,"severity":"ERROR"}]}]}

2024/01/22 02:44:47.905752 [INFO] Platform Engine finished execution on command: app-deploy

2024/01/22 02:45:47.023116 [INFO] Starting...
2024/01/22 02:45:47.023152 [INFO] Starting EBPlatform-PlatformEngine
2024/01/22 02:45:47.023173 [INFO] reading event message file
2024/01/22 02:45:47.023316 [INFO] Engine received EB command cfn-hup-exec

2024/01/22 02:45:47.101962 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBAutoScalingGroup --region us-east-1
2024/01/22 02:45:47.472802 [INFO] Running command /bin/sh -c /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:us-east-1:730335255488:stack/awseb-e-eicqmwcpj3-stack/07d801e0-b8cc-11ee-ac46-0e0a2b54e6af -r AWSEBBeanstalkMetadata --region us-east-1
2024/01/22 02:45:47.904540 [INFO] checking whether command bundle-log is applicable to this instance...
2024/01/22 02:45:47.904579 [INFO] this command is applicable to the instance, thus instance should execute command
2024/01/22 02:45:47.904584 [INFO] Engine command: (bundle-log)

2024/01/22 02:45:47.904663 [INFO] Executing instruction: GetBundleLogs
2024/01/22 02:45:47.904667 [INFO] Bundle Logs...
